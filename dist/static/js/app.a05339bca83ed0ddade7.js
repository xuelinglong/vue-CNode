webpackJsonp([1],{"4Uwr":function(t,e,s){t.exports=s.p+"static/img/logo.8874938.jpg"},BnFd:function(t,e){},E51W:function(t,e){},Jpra:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("Dd8w"),n=s.n(i),o=s("NYxO"),c={name:"Bottomnav",computed:n()({},Object(o.c)(["common"])),methods:{handleChange:function(t){this.$store.dispatch("HANDEL_CHANGE",{active:t})}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("mu-paper",{attrs:{zDepth:0}},[e("mu-bottom-nav",{attrs:{value:this.common.bottomnav.active},on:{change:this.handleChange}},[e("mu-bottom-nav-item",{attrs:{value:"topics",title:"话题",to:"/topics",icon:"view_list"}}),this._v(" "),e("mu-bottom-nav-item",{attrs:{value:"message",title:"消息",to:"/message",icon:"note"}}),this._v(" "),e("mu-bottom-nav-item",{attrs:{value:"push",title:"发布",to:"/push",icon:"send"}}),this._v(" "),e("mu-bottom-nav-item",{attrs:{value:"user",title:"我的",to:"/user",icon:"face"}})],1)],1)},staticRenderFns:[]};var r=s("VU/8")(c,l,!1,function(t){s("NWIX")},null,null).exports,u={name:"Appbar",computed:n()({},Object(o.c)(["common"]))},m={render:function(){var t=this.$createElement;return(this._self._c||t)("mu-appbar",{attrs:{title:this.common.appbar.title,zDepth:0}})},staticRenderFns:[]};var _={name:"App",components:{"v-bottomnav":r,"v-appbar":s("VU/8")(u,m,!1,function(t){s("WTiq")},null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("v-appbar"),this._v(" "),e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view"),this._v(" "),e("v-bottomnav")],1)},staticRenderFns:[]};var p=s("VU/8")(_,d,!1,function(t){s("svl/")},null,null).exports,h=s("/ocq"),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contentitem"},[s("router-link",{attrs:{to:{name:"details",params:{id:t.topic.id}}}},[s("div",{staticClass:"top-box"},[s("div",{staticClass:"author-img"},[s("img",{staticClass:"author",attrs:{src:t.topic.author.avatar_url}})]),t._v(" "),s("div",{staticClass:"title-box"},[t._v("\n        "+t._s(t.topic.title)+"\n      ")]),t._v(" "),s("div",{staticClass:"label-box"},[s("span",{staticClass:"label"},[t._v(t._s(t.topic.tab))])])]),t._v(" "),s("div",{staticClass:"icon-box"},[s("div",{staticClass:"icon-left"},[s("span",{staticClass:"author-name"},[t._v(t._s(t.topic.author.loginname)+"   "+t._s(t._f("filterTime")(t.topic.create_at))+" ")])]),t._v(" "),s("div",{staticClass:"icon-right"},[s("mu-icon",{attrs:{value:"visibility",size:15,color:"#D3DCE6"}}),t._v(" "),s("span",{staticClass:"visit-count"},[t._v(t._s(t.topic.visit_count))]),t._v(" "),s("mu-icon",{attrs:{value:"textsms",size:15,color:"#D3DCE6"}}),t._v(" "),s("span",{staticClass:"reply-count"},[t._v(t._s(t.topic.reply_count))])],1)])])],1)},staticRenderFns:[]};var f="all",C={name:"Topics",data:function(){return{activeTab:f,page:0,refreshing:!1,trigger:null,busy:!1,nomoredata:!1}},components:{"v-contentitem":s("VU/8")({name:"Contentitem",props:["topic"]},v,!1,function(t){s("n2Zj")},null,null).exports},computed:n()({},Object(o.c)(["topics"]),Object(o.b)(["TOPICS_DATA_LENGTH"])),created:function(){this.fetchtopics("all",0,20),this.page=1},mounted:function(){this.trigger=this.$el},methods:{handleTabChange:function(t){switch(this.activeTab=t,f=t,this.$store.dispatch("CLEAR_TOPICSDATA"),this.page=1,t){case"all":this.fetchtopics("all",0,20);break;case"good":this.fetchtopics("good",0,20);break;case"share":this.fetchtopics("share",0,20);break;case"ask":this.fetchtopics("ask",0,20);break;case"job":this.fetchtopics("job",0,20);break;case"dev":this.fetchtopics("dev",0,20)}},fetchtopics:function(t,e,s){this.$store.dispatch("FETCH_TOPICS",{tab:t,page:e,limit:s})},loadTop:function(){var t=this;this.refreshing=!0,this.$store.dispatch("CLEAR_TOPICSDATA"),setTimeout(function(){t.fetchtopics(t.activeTab,0,20),t.page=1,t.refreshing=!1},2e3)},loadMore:function(){var t=this;this.TOPICS_DATA_LENGTH>0&&!this.nomoredata&&(this.busy=!0,this.page+=1,this.fetchtopics(this.activeTab,this.page,20),setTimeout(function(){t.busy=!1,t.TOPICS_DATA_LENGTH%20==0&&t.TOPICS_DATA_LENGTH/20<t.page?t.page-=1:t.TOPICS_DATA_LENGTH%20!=0&&(t.nomoredata=!0)},3e3))}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topics"},[s("div",{staticClass:"tab"},[s("mu-tabs",{attrs:{value:t.activeTab},on:{change:t.handleTabChange}},[s("mu-tab",{attrs:{value:"all",title:"全部"}}),t._v(" "),s("mu-tab",{attrs:{value:"good",title:"精华"}}),t._v(" "),s("mu-tab",{attrs:{value:"share",title:"分享"}}),t._v(" "),s("mu-tab",{attrs:{value:"ask",title:"问答"}}),t._v(" "),s("mu-tab",{attrs:{value:"job",title:"招聘"}}),t._v(" "),s("mu-tab",{attrs:{value:"dev",title:"测试帖"}})],1)],1),t._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"contentlist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"30"}},[s("mu-refresh-control",{attrs:{refreshing:t.refreshing,trigger:t.trigger},on:{refresh:t.loadTop}}),t._v(" "),t._l(t.topics.topicsdata,function(t){return s("v-contentitem",{key:t.id,attrs:{topic:t}})}),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:this.busy,expression:"this.busy"}],staticClass:"loading"},[s("mu-circular-progress",{attrs:{size:25}}),t._v("\n      正在加载...\n    ")],1),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:this.nomoredata,expression:"this.nomoredata"}],staticClass:"nomoredata"},[t._v("到底啦～")])],2)])},staticRenderFns:[]};var E=s("VU/8")(C,g,!1,function(t){s("yfB1")},null,null).exports,T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"messageitem"},[s("router-link",{attrs:{to:{name:"details",params:{id:t.message.topic.id}}}},[s("div",{staticClass:"top-box"},[s("div",{staticClass:"authorimg-box"},[s("img",{staticClass:"author-img",attrs:{src:t.message.author.avatar_url}})]),t._v(" "),s("div",{staticClass:"authorname-box"},[t._v("\n        来自："+t._s(t.message.author.loginname)+"\n      ")]),t._v(" "),s("div",{staticClass:"time-box"},[t._v("\n        "+t._s(t._f("filterTime")(t.message.reply.create_at))+"\n      ")])]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n      "+t._s(t.message.reply.content)+"\n    ")])])],1)},staticRenderFns:[]};var b=s("VU/8")({name:"messageitem",props:["message"]},T,!1,function(t){s("dfA2")},null,null).exports,A={name:"Message",computed:n()({},Object(o.c)(["login","messages"]),Object(o.b)(["HASNOT_READ_MESSAGES","HAS_READ_MESSAGES"])),components:{"v-messageitem":b},created:function(){this.login.loginData.success&&this.$store.dispatch("GET_MESSAGE_COUNT",{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c"})},methods:{goToLogin:function(){it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"})}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[t.login.loginData.success?t._e():s("div",{staticClass:"message-login"},[t._m(0),t._v(" "),s("div",{staticClass:"loginbutton"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"去登录",fullWidth:!0,primary:""},nativeOn:{click:function(e){t.goToLogin(e)}}}),s("br")],1)]),t._v(" "),t.login.loginData.success?s("div",{staticClass:"message-view"},[s("div",{staticClass:"title-text"},[t._v("未读消息("+t._s(t.HASNOT_READ_MESSAGES)+")")]),t._v(" "),t.HASNOT_READ_MESSAGES>0?s("div",{staticClass:"messagelist"},t._l(t.messages.messageData.hasnot_read_messages,function(t){return s("v-messageitem",{key:t.reply.id,attrs:{message:t}})})):t._e(),t._v(" "),0===t.HASNOT_READ_MESSAGES?s("div",{staticClass:"blank"},[t._v("\n      无新消息\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"title-text"},[t._v("过往已读消息("+t._s(t.HAS_READ_MESSAGES)+")")]),t._v(" "),t.HAS_READ_MESSAGES>0?s("div",{staticClass:"messagelist"},t._l(t.messages.messageData.has_read_messages,function(t){return s("v-messageitem",{key:t.id,attrs:{message:t}})})):t._e(),t._v(" "),0===t.HAS_READ_MESSAGES?s("div",{staticClass:"blank"},[t._v("\n      无过往消息\n    ")]):t._e()]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-image"},[e("img",{staticClass:"logo",attrs:{src:s("4Uwr"),alt:""}})])}]};var L=s("VU/8")(A,S,!1,function(t){s("VDQJ")},null,null).exports,D={name:"Push",data:function(){return{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c",tab:"ask",list:[{tab:"ask",title:"问答"},{tab:"share",title:"分享"},{tab:"job",title:"招聘"},{tab:"dev",title:"测试贴"}],title:"",content:[]}},computed:n()({},Object(o.c)(["login"])),methods:{goToLogin:function(){it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"})},pushNewTopic:function(){this.login.loginData.success&&this.content.length>0&&(this.$store.dispatch("PUSH_NEW_TOPIC",{accesstoken:this.accesstoken,loginname:this.login.loginData.loginname,title:this.title,tab:this.tab,content:this.content}),this.tab="ask",this.title="",this.content=[])}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"push"},[t.login.loginData.success?t._e():s("div",{staticClass:"push-login"},[t._m(0),t._v(" "),s("div",{staticClass:"button-login"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"去登录",fullWidth:!0,primary:""},nativeOn:{click:function(e){t.goToLogin(e)}}}),s("br")],1)]),t._v(" "),t.login.loginData.success?s("div",{staticClass:"push-view"},[s("mu-select-field",{attrs:{labelFocusClass:["label-foucs"],label:"选择话题类型"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.list,function(t){return s("mu-menu-item",{key:t.index,attrs:{value:t.tab,title:t.title}})})),s("br"),t._v(" "),s("mu-text-field",{attrs:{label:"输入标题",hintText:"标题不得少于10个字符"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),s("br"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"push-content",attrs:{placeholder:"正文不能为空"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),s("div",{staticClass:"button-login"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"发布",primary:"",fullWidth:""},on:{click:t.pushNewTopic}})],1)],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-image"},[e("img",{staticClass:"logo",attrs:{src:s("4Uwr"),alt:""}})])}]};var k=s("VU/8")(D,O,!1,function(t){s("qoHg")},null,null).exports,I={name:"User",data:function(){return{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c"}},computed:n()({},Object(o.c)(["login"]),Object(o.b)(["RECENT_REPLIES","RECENT_TOPICS","TOPIC_COLLECT"])),methods:{tapToLogin:function(){this.$store.dispatch("LOGIN",{accesstoken:this.accesstoken})},loginOut:function(){this.$store.dispatch("LOGINOUT")}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[t.login.loginData.success?t._e():s("div",{staticClass:"view-login"},[s("mu-text-field",{attrs:{hintText:"accesstoken",type:"string",icon:"lock_outline",underlineFocusClass:"line-focus"},model:{value:t.accesstoken,callback:function(e){t.accesstoken=e},expression:"accesstoken"}}),s("br"),t._v(" "),s("div",{staticClass:"button-box"},[s("div",{staticClass:"main-button"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"登录",fullWidth:!0,primary:""},nativeOn:{click:function(e){t.tapToLogin(e)}}}),s("br")],1),t._v(" "),s("div",{staticClass:"main-button"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"注册",fullWidth:!0,href:"https://www.vue-js.com/signup",primary:""}})],1)])],1),t._v(" "),t.login.loginData.success?s("div",{staticClass:"view-user"},[s("div",{staticClass:"author-image"},[s("img",{staticClass:"image",attrs:{src:t.login.loginData.avatar_url,alt:""}}),s("br"),t._v(" "),s("span",{staticClass:"loginname"},[t._v(t._s(t.login.loginData.loginname))])]),t._v(" "),s("mu-list",[s("mu-list-item",{attrs:{title:"我收藏的话题",to:{name:"usertopics",params:{type:"topic_collect"}},titleClass:"left"}},[s("mu-icon",{staticStyle:{color:"#ffd600"},attrs:{slot:"left",value:"star"},slot:"left"}),t._v(" "),s("span",{staticClass:"count",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.TOPIC_COLLECT))]),t._v(" "),s("mu-icon",{attrs:{slot:"right",value:"chevron_right"},slot:"right"})],1),t._v(" "),s("mu-list-item",{attrs:{title:"我参与的话题",to:{name:"usertopics",params:{type:"recent_replies"}}}},[s("mu-icon",{staticStyle:{color:"#00b1fe"},attrs:{slot:"left",value:"chat"},slot:"left"}),t._v(" "),s("span",{staticClass:"count",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.RECENT_REPLIES))]),t._v(" "),s("mu-icon",{attrs:{slot:"right",value:"chevron_right"},slot:"right"})],1),t._v(" "),s("mu-list-item",{attrs:{title:"我最近的话题",to:{name:"usertopics",params:{type:"recent_topics"}}}},[s("mu-icon",{staticStyle:{color:"#e91e63"},attrs:{slot:"left",value:"bubble_chart"},slot:"left"}),t._v(" "),s("span",{staticClass:"count",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.RECENT_TOPICS))]),t._v(" "),s("mu-icon",{attrs:{slot:"right",value:"chevron_right"},slot:"right"})],1)],1),t._v(" "),s("div",{staticClass:"loginout"},[s("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"退出登录",fullWidth:!0,primary:""},nativeOn:{click:function(e){t.loginOut(e)}}})],1)],1):t._e()])},staticRenderFns:[]};var P=s("VU/8")(I,R,!1,function(t){s("f074")},null,null).exports,N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"usertopicitem"},[s("router-link",{attrs:{to:{name:"details",params:{id:t.topic.id}}}},[s("div",{staticClass:"image-author"},[s("img",{staticClass:"author",attrs:{src:t.topic.author.avatar_url}})]),t._v(" "),s("div",{staticClass:"name-author"},[t._v("\n      "+t._s(t.topic.author.loginname)+"\n    ")]),t._v(" "),s("div",{staticClass:"title-topic"},[t._v("\n      "+t._s(t.topic.title)+"\n    ")])])],1)},staticRenderFns:[]};var H={name:"Usertopics",data:function(){return{lists:[],title:"",length:0}},components:{"v-usertopicitem":s("VU/8")({name:"Usertopicitem",props:["topic"]},N,!1,function(t){s("BnFd")},null,null).exports},computed:n()({},Object(o.c)(["user"]),Object(o.b)(["RECENT_REPLIES","RECENT_TOPICS","TOPIC_COLLECT"])),created:function(){switch(this.$route.params.type){case"topic_collect":this.lists=this.user.topic_collect.data,this.title="我收藏的话题",this.length=this.TOPIC_COLLECT;break;case"recent_topics":this.lists=this.user.userData.recent_topics,this.title="我最近的话题",this.length=this.RECENT_TOPICS;break;case"recent_replies":this.lists=this.user.userData.recent_replies,this.title="我参与的话题",this.length=this.RECENT_REPLIES}},methods:{back:function(){it.go(-1)}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"usertopics"},[s("div",{staticClass:"paperbar"},[s("div",{staticClass:"paper-left"},[s("mu-icon-button",{attrs:{slot:"left",icon:"close"},on:{click:t.back},slot:"left"})],1),t._v(" "),s("div",{staticClass:"paper-center"},[s("span",{staticClass:"title"},[t._v(t._s(t.title)+" ( "+t._s(t.length)+" )")])]),t._v(" "),s("div",{staticClass:"paper-right"},[s("mu-icon-button",{attrs:{slot:"right",icon:""},slot:"right"}),t._v(" "),s("mu-icon-button",{attrs:{slot:"right",icon:""},slot:"right"})],1)]),t._v(" "),s("div",{staticClass:"list"},t._l(t.lists,function(t){return s("v-usertopicitem",{key:t.id,attrs:{topic:t}})}))])},staticRenderFns:[]};var y=s("VU/8")(H,w,!1,function(t){s("Omxg")},null,null).exports,x={name:"Details",data:function(){return{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c"}},computed:n()({},Object(o.c)(["login","info"]),Object(o.b)(["REPLIES_COUNT"])),created:function(){this.login.loginData.success?this.$store.dispatch("FETCH_TOPIC_DETAILS",{accesstoken:this.accesstoken,id:this.$route.params.id}):this.$store.dispatch("FETCH_TOPIC_DETAILS",{id:this.$route.params.id})},methods:{back:function(){it.go(-1),this.$store.dispatch("CLEAR_TOPIC_DETAILS")},handelCollect:function(){this.login.loginData.success?this.info.detailsData.is_collect?this.$store.dispatch("DEL_COLLECTED",{accesstoken:this.accesstoken,topic_id:this.$route.params.id,loginname:this.login.loginData.loginname}):this.$store.dispatch("COLLECT",{accesstoken:this.accesstoken,topic_id:this.$route.params.id,loginname:this.login.loginData.loginname}):(it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"}))},gotoComments:function(){it.push({name:"comments"})}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"details"},[s("div",{staticClass:"paperbar"},[s("div",{staticClass:"paper-left"},[s("mu-icon-button",{attrs:{slot:"left",icon:"arrow_back"},on:{click:t.back},slot:"left"})],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"paper-right"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.REPLIES_COUNT>0,expression:"REPLIES_COUNT > 0"}],staticClass:"replies-count",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.REPLIES_COUNT))]),t._v(" "),s("mu-icon-button",{attrs:{slot:"right",icon:"chat"},on:{click:t.gotoComments},slot:"right"}),t._v(" "),s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:!t.info.detailsData.is_collect,expression:"!info.detailsData.is_collect"}],attrs:{slot:"right",icon:"star",iconClass:"collect"},on:{click:t.handelCollect},slot:"right"}),t._v(" "),s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:t.info.detailsData.is_collect,expression:"info.detailsData.is_collect"}],staticStyle:{color:"yellow"},attrs:{slot:"right",icon:"star",iconClass:"collected"},on:{click:t.handelCollect},slot:"right"})],1)]),t._v(" "),s("div",{staticClass:"content-details"},[s("p",{staticClass:"details-title"},[t._v(t._s(t.info.detailsData.title))]),t._v(" "),s("mu-list-item",{attrs:{title:t.info.detailsData.author.loginname,disabled:""}},[s("mu-avatar",{attrs:{slot:"left",src:t.info.detailsData.author.avatar_url},slot:"left"}),t._v(" "),s("div",{staticClass:"details-time",attrs:{slot:"right"},slot:"right"},[t._v("刚刚")])],1),t._v(" "),s("div",{staticClass:"details-content",domProps:{innerHTML:t._s(t.info.detailsData.content)}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"paper-center"},[e("span",{staticClass:"title"},[this._v("话题正文")])])}]};var $=s("VU/8")(x,U,!1,function(t){s("V0V7")},null,null).exports,G={name:"Commentitem",data:function(){return{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c",number:0}},props:["comment"],computed:n()({},Object(o.c)(["login","info"])),methods:{ups:function(){this.login.loginData.success?this.$store.dispatch("REPLY_UPS",{accesstoken:this.accesstoken,reply_id:this.comment.id,topic_id:this.info.detailsData.id}):(it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"}))},replyToComment:function(){this.login.loginData.success?(this.$store.dispatch("SHOW_REPLIES_EDIT"),this.$store.dispatch("SAVE_REPLY_ID",{reply_id:this.comment.id})):(it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"}))}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"commentitem"},[s("div",{staticClass:"top-box"},[s("div",{staticClass:"authorimg-box"},[s("img",{staticClass:"author-img",attrs:{src:t.comment.author.avatar_url}})]),t._v(" "),s("div",{staticClass:"authorname-box"},[t._v("\n      "+t._s(t.comment.author.loginname)+"\n    ")]),t._v(" "),s("div",{staticClass:"time-box"},[t._v("\n      "+t._s(t._f("filterTime")(t.comment.create_at))+"\n    ")])]),t._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.comment.content)}}),t._v(" "),s("div",{staticClass:"icon-box"},[s("div",{staticClass:"left"},[s("mu-icon-button",{staticStyle:{color:"#aaaaaa"},attrs:{icon:"comment",size:14},on:{click:t.replyToComment}}),t._v(" "),s("span",{staticClass:"text"},[t._v("回复")])],1),t._v(" "),s("div",{staticClass:"right"},[s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:!t.comment.is_uped,expression:"!comment.is_uped"}],staticStyle:{color:"#aaaaaa"},attrs:{icon:"thumb_up",size:14},on:{click:t.ups}}),t._v(" "),s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:t.comment.is_uped,expression:"comment.is_uped"}],staticStyle:{color:"#ffd600"},attrs:{icon:"thumb_up",size:14},on:{click:t.ups}}),t._v(" "),s("span",{staticClass:"text"},[t._v(t._s(t.comment.ups.length))])],1)])])},staticRenderFns:[]};var M=s("VU/8")(G,F,!1,function(t){s("WN+M")},null,null).exports,W={name:"Comments",data:function(){return{accesstoken:"af0a22ca-d49f-47ec-afef-51b9cabf4c3c",content:[],toast:!1}},computed:n()({},Object(o.c)(["login","info"]),Object(o.b)(["REPLIES_COUNT"])),components:{"v-commentitem":M},methods:{back:function(){it.go(-1)},showReplies:function(){this.login.loginData.success?this.$store.dispatch("SHOW_REPLIES_EDIT"):(it.push({name:"user"}),this.$store.dispatch("HANDEL_CHANGE",{active:"user"}))},pushreply:function(){var t=this;this.content.length>0?(this.$store.dispatch("REPLY_PUSH",{accesstoken:this.accesstoken,content:this.content,topic_id:this.info.detailsData.id,reply_id:this.info.reply_toComment_id}),this.$store.dispatch("SHOW_REPLIES_EDIT"),this.content=[]):(this.toast=!0,setTimeout(function(){t.hideToast()},1e3))},cancel:function(){this.$store.dispatch("SHOW_REPLIES_EDIT"),this.$store.dispatch("CLEAR_REPLY_ID")},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer)}}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comments"},[s("div",{staticClass:"paperbar"},[s("div",{staticClass:"paper-left"},[s("mu-icon-button",{attrs:{slot:"left",icon:"arrow_back"},on:{click:t.back},slot:"left"})],1),t._v(" "),s("div",{staticClass:"paper-center"},[s("span",{staticClass:"title"},[t._v(t._s(t.REPLIES_COUNT)+"条评论")])]),t._v(" "),s("div",{staticClass:"paper-right"},[s("mu-icon-button",{attrs:{slot:"right",icon:"mode_edit"},on:{click:t.showReplies},slot:"right"})],1)]),t._v(" "),s("div",{staticClass:"commentslist"},t._l(t.info.detailsData.replies,function(t){return s("v-commentitem",{key:t.id,attrs:{comment:t}})})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.info.showreplies,expression:"info.showreplies"}],staticClass:"replies-edit"},[s("div",{staticClass:"reply-content-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input",domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),s("div",{staticClass:"replies-button"},[s("button",{staticClass:"replies-push",on:{click:t.pushreply}},[t._v("发表")]),t._v(" "),s("button",{staticClass:"replies-cancel",on:{click:t.cancel}},[t._v("取消")])]),t._v(" "),t.toast?s("mu-toast",{attrs:{message:"正文不能为空"},on:{close:t.hideToast}}):t._e()],1)])])},staticRenderFns:[]};var V=s("VU/8")(W,j,!1,function(t){s("Jpra")},null,null).exports;a.default.use(h.a);var Y=new h.a({routes:[{path:"/topics",name:"topics",component:E,meta:{keepAlive:!0}},{path:"/message",name:"message",component:L},{path:"/push",name:"push",component:k},{path:"/user",name:"user",component:P},{path:"/usertopics/:type",name:"usertopics",component:y},{path:"/details/:id",name:"details",component:$},{path:"comments",name:"comments",component:V}]});Y.push({name:"topics"});var z,q,B,J,Q,X,Z,K,tt,et,st,at,it=Y,nt=s("bqTm"),ot=s.n(nt),ct=s("u64Q"),lt=s.n(ct),rt=(s("E51W"),s("bOdI")),ut=s.n(rt),mt={state:{bottomnav:{active:"topics"},appbar:{title:"话题"}},mutations:ut()({},"HANDEL_CHANGE",function(t,e){switch(t.bottomnav.active=e.data,e.data){case"topics":t.appbar.title="话题";break;case"message":t.appbar.title="消息";break;case"push":t.appbar.title="发布";break;case"user":t.appbar.title="我的"}}),actions:ut()({},"HANDEL_CHANGE",function(t,e){t.commit("HANDEL_CHANGE",{data:e.active})})},_t=s("mtWM"),dt=s.n(_t),pt={state:{topicsdata:[]},getters:ut()({},"TOPICS_DATA_LENGTH",function(t){var e=t.topicsdata;return e?e.length:0}),mutations:(z={},ut()(z,"FETCH_TOPICS",function(t,e){t.topicsdata=e.data}),ut()(z,"CLEAR_TOPICSDATA",function(t){t.topicsdata=[]}),z),actions:(q={},ut()(q,"FETCH_TOPICS",function(t,e){dt.a.get("topics",{params:{tab:e.tab,page:e.page,limit:e.limit}}).then(function(e){var s=e.data.data,a=t.state.topicsdata.concat(s);t.commit("FETCH_TOPICS",{data:a})})}),ut()(q,"CLEAR_TOPICSDATA",function(t){t.commit("CLEAR_TOPICSDATA")}),q)},ht={state:{userData:{loginname:"",avatarurl:"",githubUsername:"",reate_at:"",score:0,recent_topics:[],recent_replies:[]},topic_collect:[]},getters:(B={},ut()(B,"RECENT_REPLIES",function(t){var e=t.userData.recent_replies;return e?e.length:0}),ut()(B,"RECENT_TOPICS",function(t){var e=t.userData.recent_topics;return e?e.length:0}),ut()(B,"TOPIC_COLLECT",function(t){var e=t.topic_collect.data;return e?e.length:0}),B),mutations:(J={},ut()(J,"FETCH_USERDATA",function(t,e){t.userData=e.data}),ut()(J,"FETCH_TOPIC_COLLECT",function(t,e){t.topic_collect=e.data}),ut()(J,"CLEAR_USERDATA",function(t){t.userData={loginname:"",avatarurl:"",githubUsername:"",reate_at:"",score:0,recent_topics:[],recent_replies:[]},t.topic_collect=[]}),J),actions:(Q={},ut()(Q,"FETCH_USERDATA",function(t,e){dt.a.get("user/"+e.loginname,{params:{loginname:e.loginname}}).then(function(e){t.commit("FETCH_USERDATA",{data:e.data.data})})}),ut()(Q,"FETCH_TOPIC_COLLECT",function(t,e){dt.a.get("topic_collect/"+e.loginname,{params:{loginname:e.loginname}}).then(function(e){t.commit("FETCH_TOPIC_COLLECT",{data:e.data})})}),ut()(Q,"CLEAR_USERDATA",function(t){t.commit("CLEAR_USERDATA")}),Q)},vt={state:{messageData:{has_read_messages:[],hasnot_read_messages:[]},count:0},getters:(X={},ut()(X,"HASNOT_READ_MESSAGES",function(t){var e=t.messageData.hasnot_read_messages;return e?e.length:0}),ut()(X,"HAS_READ_MESSAGES",function(t){var e=t.messageData.has_read_messages;return e?e.length:0}),X),mutations:(Z={},ut()(Z,"GET_MESSAGE_COUNT",function(t,e){t.count=e.data}),ut()(Z,"CLEAR_MESSAGESDATA",function(t){t.count=0,t.messageData={has_read_messages:[],hasnot_read_messages:[]}}),Z),actions:(K={},ut()(K,"GET_MESSAGE_COUNT",function(t,e){dt.a.get("message/count",{params:{accesstoken:e.accesstoken}}).then(function(e){t.commit("GET_MESSAGE_COUNT",{data:e.data})})}),ut()(K,"CLEAR_MESSAGESDATA",function(t){t.commit("CLEAR_MESSAGESDATA")}),K)},ft={state:{newTopic:{success:!1,topic_id:""}},mutations:ut()({},"PUSH_NEW_TOPIC",function(t,e){t.newTopic=e.data}),actions:ut()({},"PUSH_NEW_TOPIC",function(t,e){dt.a.post("topics",{accesstoken:e.accesstoken,title:e.title,tab:e.tab,content:e.content}).then(function(s){t.commit("PUSH_NEW_TOPIC",{data:s.data}),t.dispatch("FETCH_USERDATA",{loginname:e.loginname})})})},Ct={state:{detailsData:{id:"",author_id:"",tab:"",content:"",title:"",last_reply_at:0,good:!1,top:!1,reply_count:0,visit_count:0,create_at:"",author:{loginname:"",avatar_url:""},replies:[],is_collect:!1},collect:!1,del_collected:!1,ups:!1,showreplies:!1,replyedit:{success:"",reply_id:""},reply_toComment_id:""},getters:ut()({},"REPLIES_COUNT",function(t){var e=t.detailsData.replies;return e?e.length:0}),mutations:(tt={},ut()(tt,"FETCH_TOPIC_DETAILS",function(t,e){t.detailsData=e.data}),ut()(tt,"COLLECT",function(t,e){t.collect=e.data}),ut()(tt,"DEL_COLLECTED",function(t,e){t.del_collected=e.data}),ut()(tt,"REPLY_UPS",function(t,e){t.ups=e.data}),ut()(tt,"SHOW_REPLIES_EDIT",function(t){t.showreplies=!t.showreplies}),ut()(tt,"SAVE_REPLY_ID",function(t,e){t.reply_toComment_id=e.data}),ut()(tt,"CLEAR_REPLY_ID",function(t){t.reply_toComment_id=""}),ut()(tt,"REPLY_PUSH",function(t,e){t.replyedit=e.data}),ut()(tt,"CLEAR_TOPIC_DETAILS",function(t){t.detailsData={id:"",author_id:"",tab:"",content:"",title:"",last_reply_at:0,good:!1,top:!1,reply_count:0,visit_count:0,create_at:"",author:{loginname:"",avatar_url:""},replies:[],is_collect:!1},t.collect=!1,t.del_collected=!1}),tt),actions:(et={},ut()(et,"FETCH_TOPIC_DETAILS",function(t,e){dt.a.get("topic/"+e.id,{params:{accesstoken:e.accesstoken}}).then(function(e){t.commit("FETCH_TOPIC_DETAILS",{data:e.data.data})})}),ut()(et,"COLLECT",function(t,e){dt.a.post("topic_collect/collect",{accesstoken:e.accesstoken,topic_id:e.topic_id}).then(function(s){t.commit("COLLECT",{data:s.data.success}),t.dispatch("FETCH_TOPIC_DETAILS",{accesstoken:e.accesstoken,id:e.topic_id}),t.dispatch("FETCH_TOPIC_COLLECT",{loginname:e.loginname})})}),ut()(et,"DEL_COLLECTED",function(t,e){dt.a.post("topic_collect/de_collect",{accesstoken:e.accesstoken,topic_id:e.topic_id}).then(function(s){t.commit("DEL_COLLECTED",{data:s.data.success}),t.dispatch("FETCH_TOPIC_DETAILS",{accesstoken:e.accesstoken,id:e.topic_id}),t.dispatch("FETCH_TOPIC_COLLECT",{loginname:e.loginname})})}),ut()(et,"REPLY_UPS",function(t,e){dt.a.post("reply/"+e.reply_id+"/ups",{accesstoken:e.accesstoken}).then(function(s){t.commit("REPLY_UPS",{data:s.data.success}),t.dispatch("FETCH_TOPIC_DETAILS",{accesstoken:e.accesstoken,id:e.topic_id})})}),ut()(et,"SHOW_REPLIES_EDIT",function(t){t.commit("SHOW_REPLIES_EDIT")}),ut()(et,"SAVE_REPLY_ID",function(t,e){t.commit("SAVE_REPLY_ID",{data:e.reply_id})}),ut()(et,"CLEAR_REPLY_ID",function(t){t.commit("CLEAR_REPLY_ID")}),ut()(et,"REPLY_PUSH",function(t,e){dt.a.post("topic/"+e.topic_id+"/replies",{accesstoken:e.accesstoken,content:e.content,reply_id:e.reply_id}).then(function(s){t.commit("REPLY_PUSH",{data:s.data}),t.dispatch("FETCH_TOPIC_DETAILS",{accesstoken:e.accesstoken,id:e.topic_id}),t.commit("CLEAR_REPLY_ID")})}),ut()(et,"CLEAR_TOPIC_DETAILS",function(t){t.commit("CLEAR_TOPIC_DETAILS")}),et)},gt={state:{loginData:{avatarurl:"",id:"",loginname:"",success:!1}},mutations:(st={},ut()(st,"LOGIN",function(t,e){t.loginData=e.data}),ut()(st,"LOGINOUT",function(t){t.loginData={avatarurl:"",id:"",loginname:"",success:!1}}),st),actions:(at={},ut()(at,"LOGIN",function(t,e){dt.a.post("accesstoken",{accesstoken:e.accesstoken}).then(function(e){t.commit("LOGIN",{data:e.data}),t.dispatch("FETCH_USERDATA",{loginname:e.data.loginname}),t.dispatch("FETCH_TOPIC_COLLECT",{loginname:e.data.loginname})})}),ut()(at,"LOGINOUT",function(t){t.commit("LOGINOUT"),t.commit("CLEAR_USERDATA"),t.commit("CLEAR_MESSAGESDATA")}),at)};a.default.use(o.a);var Et=new o.a.Store({modules:{common:mt,topics:pt,user:ht,messages:vt,push:ft,info:Ct,login:gt}});dt.a.defaults.baseURL="https://cnodejs.org/api/v1/",a.default.config.productionTip=!1,a.default.use(lt.a),a.default.use(ot.a),a.default.filter("filterTime",function(t){if(!t)return"";var e=new Date(t).getTime(),s=(new Date).getTime(),a=new Date(t),i=a.getFullYear(),n=a.getMonth()+1,o=a.getDate(),c=s-e,l=Math.floor(c/1e3),r=Math.floor(l/60),u=Math.floor(r/60),m=Math.floor(u/24);return 0===r?l+"秒前":0===u?r+"分钟前":0===m?u+"小时前":m>0&&m<=20?m+"天前":m>20?i+"-"+n+"-"+o:void 0}),new a.default({el:"#app",router:it,store:Et,components:{App:p},template:"<App/>"})},NWIX:function(t,e){},Omxg:function(t,e){},V0V7:function(t,e){},VDQJ:function(t,e){},"WN+M":function(t,e){},WTiq:function(t,e){},dfA2:function(t,e){},f074:function(t,e){},n2Zj:function(t,e){},qoHg:function(t,e){},"svl/":function(t,e){},yfB1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a05339bca83ed0ddade7.js.map